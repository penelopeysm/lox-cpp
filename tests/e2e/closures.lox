fun makeCounter() {
    var i = 0;
    fun count() {
        i = i + 1;
        print i;
    }
    return count;
}
var counter = makeCounter();
counter(); // should print 1.0
counter(); // should print 2.0

var g = "global";
fun scopes() {
    var h = "h1";
    fun inner() {
        print g;
        print h;
    }
    inner(); // should print "global" and "h1"
    var g = "block";
    h = "h2";
    inner(); // should print "global" and "h2"
}
scopes();

fun final() {
    // Here, i cannot be resolved by the semantic analysis
    // pass. That means that i should always refer to a
    // global...
    fun g() {
        print i;
    }
    g();
    // ... even if it is later defined as a local.
    var i = 2;
    g();
}
var i = 1;
final(); // should print 1 and 1
